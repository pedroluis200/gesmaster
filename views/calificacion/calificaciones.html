{{extend 'layout_admin.html'}}

<a href="{{=URL('asignaturas')}}" class="btn mb-3 btn-rounded btn-info">
    <span><i class="fas fa-arrow-left"></i> </span>
</a>

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Calificaciones</h4>
                <h5>
                    Asignatura: {{=actividad_edicion.id_actividad.nombre}}
                </h5>
                <br>
                {{if estudiantes:}}
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>CI</th>
                                <th>Nota</th>
                                <th>Tipo</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{for item in estudiantes:}}
                            {{calificacion = get_calificacion(db, actividad_edicion.id, item.id)}}
                            <tr>
                                <td>{{=' '.join([item.nombre, item.apellido1, item.apellido2])}}</td>
                                <td>{{=item.ci}}</td>
                                <td>{{=calificacion.nota if calificacion else ''}}</td>
                                <td>
                                    {{if calificacion:}}
                                    {{if calificacion.tipo == 'Suficiencia':}}
                                    <span class="badge badge-success">Suficiencia</span>
                                    {{elif calificacion.tipo == 'Convalidado':}}
                                    <span class="badge badge-info">Convalidado</span>
                                    {{else:}}
                                    <span class="badge badge-primary">Examen</span>
                                    {{pass}}
                                    {{else:}}
                                    <span class="badge badge-secondary">No calificado</span>
                                    {{pass}}
                                </td>
                            </tr>
                            {{pass}}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th>Nombre</th>
                                <th>CI</th>
                                <th>Nota</th>
                                <th>Tipo</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                {{else:}}
                <h5 class="text-danger">No se ha calificado</h5>
                {{pass}}
            </div>
        </div>
    </div>
</div>