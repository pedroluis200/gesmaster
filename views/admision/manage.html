{{extend 'layout_admin.html'}}

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Gestionar admisi√≥n de estudiantes</h4>
                <div class="table-responsive">
                    <table class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Apellidos</th>
                                <th>CI</th>
                                <th>Usuario</th>
                                <th>Solicitud</th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            {{for admision in admisiones:}}
                            <tr>
                                <td>{{=admision.nombre}}</td>
                                <td>{{=admision.apellido1 +' '+ admision.apellido2}}</td>
                                <td>{{=admision.ci}}</td>
                                <td>
                                    <a href="{{=URL('usuario', 'detalles', args=admision.id_user)}}">
                                        {{=admision.id_user.username}}
                                    </a>
                                </td>
                                <td>
                                    {{if admision.estado == 'Aprobado':}}
                                    {{badge='primary'}}
                                    {{elif admision.estado == 'No aprobado':}}
                                    {{badge='danger'}}
                                    {{elif admision.estado == 'Baja':}}
                                    {{badge='dark'}}
                                    {{else:}}
                                    {{badge='warning'}}
                                    {{pass}}

                                    <span class="badge badge-{{=badge}}">{{=admision.estado}}</span>
                                </td>
                                <td>
                                    <a href="{{=URL('modificar_solicitud', args=admision.id)}}"
                                        class="btn btn-primary btn-rounded text-white mb-2">
                                        <i class="fas fa-edit"></i>
                                        Modificar solicitud
                                    </a>
                                </td>
                                <td>
                                    <a href="{{=URL('detalles', args=admision.id)}}"
                                        class="btn btn-info btn-rounded text-white mb-2">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                    <a href="{{=URL('reporte_admision', args=admision.id)}}" class="btn btn-dark btn-rounded text-white mb-2">
                                        <i class="fas fa-print"></i>
                                    </a>
                                    <a href="{{=URL('editar', args=admision.id)}}"
                                        class="btn btn-success btn-rounded text-white mb-2">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    <a href="#" onclick="delete_elem(`{{=URL('eliminar', args=admision.id)}}`)"
                                        class="btn btn-danger btn-rounded text-white mb-2">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                </td>
                            </tr>
                            {{pass}}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th>Nombre</th>
                                <th>Apellidos</th>
                                <th>CI</th>
                                <th>Usuario</th>
                                <th>Solicitud</th>
                                <th></th>
                                <th></th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

{{block datatable}}
{{include '_includes/datatable/imports.html'}}
{{include '_includes/sweetalert/delete.html'}}
<script>
    $("table").DataTable({
        responsive: true,
        order: [[4, 'desc']],
        language: {
            url: '{{=URL("static/layout", "vendor/tables/locale/es_es.json")}}'
        }
    });
</script>
{{end datatable}}